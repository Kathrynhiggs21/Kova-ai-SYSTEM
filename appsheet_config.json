{
  "app": {
    "name": "Kova AI Control Center",
    "description": "Complete AI-powered development automation dashboard",
    "appId": "kova-ai-control-center",
    "version": "1.0.0",
    "settings": {
      "enableOfflineMode": true,
      "enableSync": true,
      "syncOnStart": true,
      "syncInterval": 30
    },
    "branding": {
      "primaryColor": "#2563eb",
      "accentColor": "#10b981",
      "logoUrl": "https://your-domain.com/logo.png"
    },
    "dataSources": [
      {
        "name": "KovaAPI",
        "type": "REST",
        "baseUrl": "http://localhost:8000",
        "authentication": {
          "type": "APIKey",
          "headerName": "X-API-Key",
          "apiKey": "${API_KEY}"
        }
      }
    ],
    "tables": {
      "Errors": {
        "source": "KovaAPI",
        "endpoint": "/api/errors",
        "idColumn": "error_id",
        "labelColumn": "message",
        "columns": [
          {
            "name": "error_id",
            "type": "Text",
            "key": true,
            "required": true,
            "editable": false,
            "show": false
          },
          {
            "name": "repository",
            "type": "Ref",
            "refTable": "Repositories",
            "required": true,
            "displayName": "Repository"
          },
          {
            "name": "file_path",
            "type": "Text",
            "required": true,
            "searchable": true,
            "displayName": "File Path"
          },
          {
            "name": "line_number",
            "type": "Number",
            "displayName": "Line"
          },
          {
            "name": "error_type",
            "type": "Enum",
            "enumValues": ["Syntax", "Logic", "Runtime", "Style", "Security", "Performance"],
            "required": true,
            "displayName": "Type"
          },
          {
            "name": "severity",
            "type": "Enum",
            "enumValues": ["Low", "Medium", "High", "Critical"],
            "required": true,
            "displayName": "Severity",
            "formatting": {
              "Critical": {"backgroundColor": "#ef4444", "textColor": "#ffffff", "icon": "error"},
              "High": {"backgroundColor": "#f97316", "textColor": "#ffffff", "icon": "warning"},
              "Medium": {"backgroundColor": "#eab308", "textColor": "#000000", "icon": "info"},
              "Low": {"backgroundColor": "#22c55e", "textColor": "#ffffff", "icon": "check_circle"}
            }
          },
          {
            "name": "message",
            "type": "LongText",
            "required": true,
            "displayName": "Error Message"
          },
          {
            "name": "suggested_fix",
            "type": "LongText",
            "displayName": "Suggested Fix"
          },
          {
            "name": "confidence",
            "type": "Percent",
            "displayName": "Fix Confidence"
          },
          {
            "name": "status",
            "type": "Enum",
            "enumValues": ["Open", "In Progress", "Fixed", "Ignored"],
            "required": true,
            "initial": "Open",
            "displayName": "Status"
          },
          {
            "name": "auto_fixable",
            "type": "Yes/No",
            "appFormula": "IF([confidence] > 0.8, TRUE, FALSE)",
            "displayName": "Auto-Fixable"
          },
          {
            "name": "priority_score",
            "type": "Number",
            "appFormula": "SWITCH([severity], \"Critical\", 100, \"High\", 75, \"Medium\", 50, \"Low\", 25) + (HOUR(NOW() - [detected_at]) * 2)",
            "displayName": "Priority",
            "show": false
          },
          {
            "name": "detected_at",
            "type": "DateTime",
            "required": true,
            "initial": "NOW()",
            "displayName": "Detected"
          },
          {
            "name": "fixed_at",
            "type": "DateTime",
            "displayName": "Fixed At"
          }
        ]
      },
      "Repositories": {
        "source": "KovaAPI",
        "endpoint": "/api/repositories",
        "idColumn": "repo_id",
        "labelColumn": "name",
        "columns": [
          {
            "name": "repo_id",
            "type": "Text",
            "key": true,
            "required": true,
            "editable": false
          },
          {
            "name": "name",
            "type": "Text",
            "required": true,
            "searchable": true,
            "displayName": "Repository Name"
          },
          {
            "name": "url",
            "type": "URL",
            "displayName": "Repository URL"
          },
          {
            "name": "health_score",
            "type": "Percent",
            "appFormula": "(100 - (COUNT(SELECT(Errors[error_id], AND([repository] = [_THISROW].[repo_id], [status] <> \"Fixed\"))) * 2)) / 100",
            "displayName": "Health Score",
            "formatting": {
              "conditional": [
                {"condition": "[health_score] < 0.5", "backgroundColor": "#ef4444"},
                {"condition": "[health_score] < 0.7", "backgroundColor": "#f97316"},
                {"condition": "[health_score] < 0.9", "backgroundColor": "#eab308"},
                {"condition": "[health_score] >= 0.9", "backgroundColor": "#22c55e"}
              ]
            }
          },
          {
            "name": "open_errors",
            "type": "Number",
            "appFormula": "COUNT(SELECT(Errors[error_id], AND([repository] = [_THISROW].[repo_id], [status] <> \"Fixed\")))",
            "displayName": "Open Errors"
          },
          {
            "name": "critical_errors",
            "type": "Number",
            "appFormula": "COUNT(SELECT(Errors[error_id], AND([repository] = [_THISROW].[repo_id], [severity] = \"Critical\", [status] <> \"Fixed\")))",
            "displayName": "Critical Issues"
          },
          {
            "name": "last_scan",
            "type": "DateTime",
            "displayName": "Last Scan"
          },
          {
            "name": "auto_fix_enabled",
            "type": "Yes/No",
            "initial": "TRUE",
            "displayName": "Auto-Fix Enabled"
          }
        ],
        "relatedColumns": [
          {
            "name": "Related Errors",
            "type": "List",
            "refTable": "Errors",
            "refColumn": "repository"
          }
        ]
      },
      "AICommands": {
        "source": "KovaAPI",
        "endpoint": "/ai/commands",
        "idColumn": "command_id",
        "labelColumn": "command_text",
        "columns": [
          {
            "name": "command_id",
            "type": "Text",
            "key": true,
            "required": true,
            "initial": "UNIQUEID()",
            "editable": false
          },
          {
            "name": "command_text",
            "type": "LongText",
            "required": true,
            "displayName": "Command",
            "placeholder": "e.g., Fix all critical errors in authentication module"
          },
          {
            "name": "intent",
            "type": "Text",
            "displayName": "Detected Intent"
          },
          {
            "name": "status",
            "type": "Enum",
            "enumValues": ["Pending", "Processing", "Complete", "Failed"],
            "required": true,
            "initial": "Pending",
            "displayName": "Status"
          },
          {
            "name": "result",
            "type": "LongText",
            "displayName": "Result"
          },
          {
            "name": "confidence",
            "type": "Percent",
            "displayName": "Confidence"
          },
          {
            "name": "created_at",
            "type": "DateTime",
            "required": true,
            "initial": "NOW()",
            "displayName": "Created"
          },
          {
            "name": "completed_at",
            "type": "DateTime",
            "displayName": "Completed"
          }
        ]
      },
      "AutoFixes": {
        "source": "KovaAPI",
        "endpoint": "/api/auto-fixes",
        "idColumn": "fix_id",
        "columns": [
          {
            "name": "fix_id",
            "type": "Text",
            "key": true,
            "required": true,
            "editable": false
          },
          {
            "name": "error_ref",
            "type": "Ref",
            "refTable": "Errors",
            "required": true,
            "displayName": "Error"
          },
          {
            "name": "repository",
            "type": "Ref",
            "refTable": "Repositories",
            "displayName": "Repository"
          },
          {
            "name": "fix_type",
            "type": "Text",
            "displayName": "Fix Type"
          },
          {
            "name": "description",
            "type": "LongText",
            "displayName": "Description"
          },
          {
            "name": "confidence",
            "type": "Percent",
            "displayName": "Confidence"
          },
          {
            "name": "applied",
            "type": "Yes/No",
            "displayName": "Applied"
          },
          {
            "name": "test_passed",
            "type": "Yes/No",
            "displayName": "Tests Passed"
          },
          {
            "name": "created_at",
            "type": "DateTime",
            "required": true,
            "initial": "NOW()",
            "displayName": "Created"
          }
        ]
      }
    },
    "views": {
      "Dashboard": {
        "type": "dashboard",
        "position": "prominent",
        "icon": "dashboard",
        "showInMenu": true,
        "components": [
          {
            "type": "metric",
            "title": "System Health",
            "value": "AVERAGE(Repositories[health_score])",
            "format": "percent",
            "icon": "favorite",
            "color": "dynamic"
          },
          {
            "type": "metric",
            "title": "Critical Errors",
            "value": "COUNT(SELECT(Errors[error_id], AND([severity] = \"Critical\", [status] <> \"Fixed\")))",
            "format": "number",
            "icon": "error",
            "color": "#ef4444"
          },
          {
            "type": "metric",
            "title": "Auto-Fix Rate",
            "value": "COUNT(SELECT(AutoFixes[fix_id], [applied] = TRUE)) / COUNT(AutoFixes[fix_id])",
            "format": "percent",
            "icon": "build",
            "color": "#22c55e"
          },
          {
            "type": "chart",
            "title": "Errors by Severity",
            "chartType": "pie",
            "data": "Errors",
            "groupBy": "severity",
            "filter": "[status] <> \"Fixed\"",
            "colors": ["#22c55e", "#eab308", "#f97316", "#ef4444"]
          },
          {
            "type": "chart",
            "title": "Repository Health Scores",
            "chartType": "bar",
            "data": "Repositories",
            "xAxis": "name",
            "yAxis": "health_score",
            "color": "#2563eb"
          },
          {
            "type": "table",
            "title": "Recent Critical Errors",
            "data": "Errors",
            "filter": "AND([severity] = \"Critical\", [status] = \"Open\")",
            "columns": ["repository", "file_path", "message"],
            "limit": 5
          }
        ]
      },
      "ErrorManagement": {
        "type": "table",
        "title": "Error Management",
        "icon": "bug_report",
        "showInMenu": true,
        "data": "Errors",
        "filter": "[status] <> \"Fixed\"",
        "sort": "[priority_score] DESC",
        "columns": [
          "severity",
          "repository",
          "file_path",
          "line_number",
          "error_type",
          "message",
          "status",
          "auto_fixable"
        ],
        "actions": ["AutoFix", "IgnoreError", "CreateGitHubIssue"],
        "groupBy": "severity",
        "searchable": true
      },
      "AICommandCenter": {
        "type": "form",
        "title": "AI Command Center",
        "icon": "psychology",
        "showInMenu": true,
        "table": "AICommands",
        "fields": [
          {
            "name": "command_text",
            "label": "Enter Command",
            "type": "LongText",
            "required": true,
            "placeholder": "Type your command in natural language...",
            "helpText": "Examples: 'Fix all critical errors', 'Create user authentication API', 'Analyze repository health'"
          }
        ],
        "onSave": {
          "action": "ExecuteAICommand",
          "showProgress": true,
          "successMessage": "Command executed successfully!",
          "errorMessage": "Command failed. Please try again."
        }
      },
      "RepositoryHealth": {
        "type": "gallery",
        "title": "Repository Health",
        "icon": "folder",
        "showInMenu": true,
        "data": "Repositories",
        "sort": "[health_score] ASC",
        "card": {
          "title": "[name]",
          "subtitle": "Health: [health_score]",
          "content": "Open Errors: [open_errors]\nCritical: [critical_errors]",
          "actions": ["ScanRepository", "ViewErrors"]
        }
      }
    },
    "actions": {
      "AutoFix": {
        "name": "Auto-Fix Error",
        "icon": "build",
        "for": "Errors",
        "condition": "AND([auto_fixable] = TRUE, [status] = \"Open\")",
        "do": {
          "type": "Data: execute an action on a set of rows",
          "action": "CallWebhook",
          "webhook": {
            "url": "http://localhost:8000/webhooks/auto-fix",
            "method": "POST",
            "headers": {
              "Content-Type": "application/json",
              "X-API-Key": "${API_KEY}"
            },
            "body": {
              "error_id": "[error_id]",
              "repository": "[repository]",
              "file_path": "[file_path]",
              "line_number": "[line_number]",
              "suggested_fix": "[suggested_fix]"
            }
          }
        },
        "confirmation": {
          "title": "Apply Auto-Fix?",
          "message": "This will automatically fix the error: [message]",
          "confirmButton": "Fix Now",
          "cancelButton": "Cancel"
        }
      },
      "ExecuteAICommand": {
        "name": "Execute AI Command",
        "for": "AICommands",
        "do": {
          "type": "Data: execute an action on a set of rows",
          "action": "CallWebhook",
          "webhook": {
            "url": "http://localhost:8000/ai/command",
            "method": "POST",
            "headers": {
              "Content-Type": "application/json",
              "X-API-Key": "${API_KEY}"
            },
            "body": {
              "command": "[command_text]",
              "command_id": "[command_id]"
            }
          }
        }
      },
      "ScanRepository": {
        "name": "Scan Repository",
        "icon": "search",
        "for": "Repositories",
        "do": {
          "type": "Data: execute an action on a set of rows",
          "action": "CallWebhook",
          "webhook": {
            "url": "http://localhost:8000/api/scan",
            "method": "POST",
            "body": {
              "repository_id": "[repo_id]",
              "name": "[name]"
            }
          }
        }
      }
    },
    "bots": {
      "CriticalErrorAlert": {
        "name": "Critical Error Alert",
        "description": "Alert on critical errors",
        "event": {
          "type": "data_change",
          "table": "Errors",
          "condition": "AND([_THISROW_AFTER].[severity] = \"Critical\", [_THISROW_BEFORE].[error_id] = BLANK())"
        },
        "actions": [
          {
            "type": "send_notification",
            "title": "ðŸš¨ Critical Error Detected",
            "body": "Repository: [repository]\nFile: [file_path]\nError: [message]",
            "importance": "high",
            "recipients": ["${ADMIN_EMAIL}"]
          },
          {
            "type": "create_task",
            "title": "Review Critical Error in [repository]",
            "description": "[message]",
            "assignee": "${ADMIN_EMAIL}",
            "priority": "high"
          }
        ]
      },
      "AutoFixBot": {
        "name": "Automatic Error Fixer",
        "description": "Automatically fix high-confidence errors",
        "event": {
          "type": "data_change",
          "table": "Errors",
          "condition": "AND([_THISROW_AFTER].[confidence] > 0.9, [_THISROW_AFTER].[status] = \"Open\", [_THISROW_AFTER].[severity] <> \"Critical\")"
        },
        "actions": ["AutoFix"]
      },
      "DailyHealthReport": {
        "name": "Daily Health Report",
        "description": "Send daily system health report",
        "schedule": {
          "type": "daily",
          "time": "09:00",
          "timezone": "UTC"
        },
        "actions": [
          {
            "type": "send_email",
            "to": ["${ADMIN_EMAIL}"],
            "subject": "Kova AI Daily Health Report",
            "body": "System Health: <<AVERAGE(Repositories[health_score])>>\nOpen Errors: <<COUNT(SELECT(Errors[error_id], [status] = \"Open\"))>>\nFixed Today: <<COUNT(SELECT(Errors[error_id], DATE([fixed_at]) = TODAY()))>>"
          }
        ]
      }
    },
    "security": {
      "authentication": {
        "require": true,
        "provider": "Google"
      },
      "authorization": {
        "defaultRole": "viewer",
        "roles": {
          "admin": {
            "tables": "*",
            "actions": "*",
            "views": "*"
          },
          "developer": {
            "tables": ["Errors", "Repositories", "AICommands"],
            "actions": ["AutoFix", "ExecuteAICommand"],
            "views": "*"
          },
          "viewer": {
            "tables": {
              "Errors": "read",
              "Repositories": "read"
            },
            "actions": [],
            "views": ["Dashboard", "RepositoryHealth"]
          }
        }
      }
    }
  }
}